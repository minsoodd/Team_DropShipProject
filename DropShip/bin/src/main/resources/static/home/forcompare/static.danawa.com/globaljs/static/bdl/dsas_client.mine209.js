const DSAC={version:"v2.0.0",cookie_key:"danawa-loggingApplicationClient",debug_mode:false,api_mode:"local",api_info:{local:{client_hostname:["localhost","local","/[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$/"],url:"dsas-t.danawa.com",port:"",domain:"localhost"},dev:{client_hostname:["dsac-t","-t"],url:"dsas-t.danawa.com",port:"",domain:".danawa.com"},stage:{client_hostname:["dsac-s","-s"],url:"dsas-t.danawa.com",port:"",domain:".danawa.com"},production:{client_hostname:[],url:"https://dsas.danawa.com",port:"",domain:".danawa.com"},api_path:{bid:"/uxbid",send:"/uxlog",failure:"/uxlog"}},json_data:null,print_msg:function(e){if(this.debug_mode===true){console.log(e)}else{return 0}},get_cookie:function(){return document.cookie.match("(^|;) ?"+this.cookie_key+"=([^;]*)(;|$)")},get_bid:function(){var e=this.get_cookie();return e[2]},save_cookie:function(e){var t=new Date;t.setTime(t.getTime()+36500*24*60*60*1e3);var o=this.cookie_key+"="+encodeURIComponent(e)+"; path=/; expires="+t.toUTCString()+"; domain="+encodeURIComponent(this.api_info[this.api_mode]["domain"]);document.cookie=o;return o},generate_url:function(e,t){if(this.api_info[e]["url"].startsWith("http")){return this.api_info[e]["url"]+this.api_info[e]["port"]+this.api_info["api_path"][t]}return location.protocol+"//"+this.api_info[e]["url"]+this.api_info[e]["port"]+this.api_info["api_path"][t]},send_http_request:function(o,n){var i=new XMLHttpRequest;i.open(o.method,o.url,true);if(o.contentType!=null)i.setRequestHeader("Content-Type",o.contentType);i.responseType=o.responseType;i.onload=function(){var e=i.response;if(typeof n==="function"&&e.data!==null){var t=e.data;n(o,t)}};i.onerror=function(){if(o.method==="POST"){navigator.sendBeacon(o.url,new Blob([o.data],{type:o.contentType}))}};if(o.method==="POST"){i.send(o.data)}else{i.send()}},execute:function(e,t){try{if(t===undefined){t=false}if(arguments.length>2){console.log("입력한 parameter 수가 일치 하지 않 습니다");return 0}if(typeof arguments[0]!="string"){console.log("입력한 첫번째 parameter 의 타입이 일치 하지 않 습니다");return 0}if(arguments[0].length===0){console.log("입력한 첫번째 parameter 가 입력 되지 않았 습니다");return 0}if(typeof t!="boolean"){console.log("입력한 두번째 parameter 의 타입이 일치 하지 않 습니다");return 0}this.debug_mode=t;this.json_data=e;this.api_mode=this.get_mode();this.send()}catch(e){console.log(e)}},get_mode:function(){var e=location.hostname;for(var t=0;t<this.api_info["local"]["client_hostname"].length;t++){if(e.search(this.api_info["local"]["client_hostname"][t])>-1){return"local"}}for(var t=0;t<this.api_info["dev"]["client_hostname"].length;t++){if(e.search(this.api_info["dev"]["client_hostname"][t])>-1){return"dev"}}for(var t=0;t<this.api_info["stage"]["client_hostname"].length;t++){if(e.search(this.api_info["stage"]["client_hostname"][t])>-1){return"stage"}}return"production"},send:function(){try{if(this.api_mode){var e=this.get_cookie();if(e){var t=e[2];this.send_uxlog(t)}else{this.send_uxlog_after_issue_bid()}}else{console.log("mode not found - send main fail")}}catch(e){if(this.debug_mode===true){console.log(e)}else{console.log(e.name,e.message)}}},send_uxlog_after_issue_bid:function(){if(this.api_mode){var e=this.generate_url(this.api_mode,"bid");var t=function(e,t){if(e.url.includes("uxbid")){if(arguments.length!==2||typeof t!=="string"||t.length!==36){console.log("고유 키 값에 오류가 있습니다")}else{this.save_cookie(t);this.send_uxlog(t)}}}.bind(this);var o={method:"GET",url:e,responseType:"json",version:this.version};this.send_http_request(o,t)}},send_uxlog:function(e){if(this.api_mode){var t=this.generate_url(this.api_mode,"send");var o={"js-event":this.json_data,bid:e,referer:location.href,"pre-referer":document.referrer};var n={method:"POST",contentType:"application/x-www-form-urlencoded",url:t,data:new URLSearchParams(o).toString(),responseType:"json",version:this.version};this.send_http_request(n)}else{this.print_msg("mode not found...")}}};